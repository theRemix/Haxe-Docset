<!DOCTYPE html>
<html lang="en"><head><meta charset="utf-8"/><link href="../../bootstrap-combined.min.css" rel="stylesheet" /><script type="text/javascript" src="../../jquery-1.9.1.min.js"></script><script type="text/javascript" src="../../bootstrap.min.js"></script><link href="../../styles.css" rel="stylesheet" /><link rel="icon" href="../../favicon.ico" type="image/x-icon"></link><script type="text/javascript" src="../../nav.js"></script><script type="text/javascript" src="../../index.js"></script><script type="text/javascript">var dox = {rootPath: "../../",platforms: ["cpp","flash","flash8","java","js","neko","php"]};</script><title>Loader</title></head><body><div class="navbar navbar-inverse navbar-fixed-top"><div class="navbar-inner"><form class="navbar-search pull-left" id="searchForm"><input id="search" type="text" class="search-query" placeholder="Filter" autocomplete="off"/></form><ul class="nav"><li id="select-platform" class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown">Platform<b class="caret"></b></a><ul class="dropdown-menu"><li data="all"><a href="#">All Platforms</a></li><li data="cpp"><a href="#">cpp</a></li><li data="flash"><a href="#">flash</a></li><li data="flash8"><a href="#">flash8</a></li><li data="java"><a href="#">java</a></li><li data="js"><a href="#">js</a></li><li data="neko"><a href="#">neko</a></li><li data="php"><a href="#">php</a></li></ul></li></ul></div></div><div id="container"><div id="nav"></div><div id="content"><div class="header"><h1><code><span class="directive">class </span><span class="type">neko.vm.Loader</span></code></h1></div><div class="body"><p class="availability">Available on neko</p><div class="doc"><p>Loaders can be used to dynamicly load Neko primitives stored in NDLL libraries.</p>
<p>Loaders can be used to dynamicly load other Neko modules (.n bytecode files).
Modules are referenced by names. To lookup the corresponding bytecode file, the
default loader first look in its cache, then eventually adds the .n extension
to the name and lookup the bytecode in its path.</p>
<p>Loaders can be used for sandbox security. When a Module is loaded with a given
Loader, this loader can manager the module security by filtering which
primitives can be loaded by this module or by rewrapping them at loading-time
with custom securized versions. Loaders are inherited in loaded submodules.</p></div><h2>Class Fields</h2><div class="platform platform-neko"><a name="local"></a><h3><p><code><span class="keyword">static </span><span class="keyword">function</span> <a href="#local"><span class="identifier">local</span></a>():<a class="type" href="../../neko/vm/Loader.html">Loader</a></code></p></h3><div class="doc"><p>Returns the local Loader. This is the loader that was used to load the
module in which the code is defined.</p></div></div><div class="platform platform-neko"><a name="make"></a><h3><p><code><span class="keyword">static </span><span class="keyword">function</span> <a href="#make"><span class="identifier">make</span></a>(loadPrim:<a class="type" href="../../String.html">String</a> -&gt;<a class="type" href="../../Int.html">Int</a> -&gt;<a class="type" href="../../Dynamic.html">Dynamic</a>loadModule:<a class="type" href="../../String.html">String</a> -&gt;<a class="type" href="../../neko/vm/Loader.html">Loader</a> -&gt;<a class="type" href="../../neko/vm/Module.html">Module</a>):<a class="type" href="../../neko/vm/Loader.html">Loader</a></code></p></h3><div class="doc"><p>Creates a loader using two methods. This loader will not have an accessible cache or path,
although you can implement such mecanism in the methods body.</p></div></div><h2>Instance Fields</h2><div class="platform platform-neko"><a name="l"></a><h3><p><code><span class="keyword">var</span> <a href="#l"><span class="identifier">l</span></a>:<a class="type" href="../../neko/vm/LoaderHandle.html">LoaderHandle</a></code></p></h3><div class="doc"><p>The abstract handle.</p></div></div><div class="platform platform-neko"><a name="new"></a><h3><p><code><span class="keyword">function</span> <a href="#new"><span class="identifier">new</span></a>(l:<a class="type" href="../../neko/vm/LoaderHandle.html">LoaderHandle</a>):<a class="type" href="../../Void.html">Void</a></code></p></h3><div class="doc"><p></p></div></div><div class="platform platform-neko"><a name="addPath"></a><h3><p><code><span class="keyword">function</span> <a href="#addPath"><span class="identifier">addPath</span></a>(s:<a class="type" href="../../String.html">String</a>):<a class="type" href="../../Void.html">Void</a></code></p></h3><div class="doc"><p>Adds a directory to the search path. See [getPath]</p></div></div><div class="platform platform-neko"><a name="backupCache"></a><h3><p><code><span class="keyword">function</span> <a href="#backupCache"><span class="identifier">backupCache</span></a>(c:<a class="type" href="../../Dynamic.html">Dynamic</a>):<a class="type" href="../../Dynamic.html">Dynamic</a></code></p></h3><div class="doc"><p>Change the cache value and returns the old value. This can be used
to backup the loader cache and restore it later.</p></div></div><div class="platform platform-neko"><a name="getCache"></a><h3><p><code><span class="keyword">function</span> <a href="#getCache"><span class="identifier">getCache</span></a>():<a class="type" href="../../haxe/ds/StringMap.html">StringMap</a>&lt;<a class="type" href="../../neko/vm/Module.html">Module</a>&gt;</code></p></h3><div class="doc"><p>The default loader contains a cache of already loaded modules. It's
ensuring that the same module does not get loaded twice when circular
references are occuring. The same module can eventually be loaded twice
but with different names, for example with two relatives paths reprensenting
the same file, since the cache is done on a by-name basic.</p></div></div><div class="platform platform-neko"><a name="getPath"></a><h3><p><code><span class="keyword">function</span> <a href="#getPath"><span class="identifier">getPath</span></a>():<a class="type" href="../../Array.html">Array</a>&lt;<a class="type" href="../../String.html">String</a>&gt;</code></p></h3><div class="doc"><p>The default loader contains a search path in its [path] field. It's a
linked list of Neko strings that is a parsed version of the [NEKOPATH].
This path is used to lookup for modules and libraries.</p></div></div><div class="platform platform-neko"><a name="loadModule"></a><h3><p><code><span class="keyword">function</span> <a href="#loadModule"><span class="identifier">loadModule</span></a>(modName:<a class="type" href="../../String.html">String</a>, ?loader:<a class="type" href="../../neko/vm/Loader.html">Loader</a>):<a class="type" href="../../neko/vm/Module.html">Module</a></code></p></h3><div class="doc"><p>Loads a Module with the given name. If [loader] is defined, this will be
this Module loader, else this loader will be inherited. When loaded this
way, the module is directly executed.</p></div></div><div class="platform platform-neko"><a name="loadPrimitive"></a><h3><p><code><span class="keyword">function</span> <a href="#loadPrimitive"><span class="identifier">loadPrimitive</span></a>(prim:<a class="type" href="../../String.html">String</a>, nargs:<a class="type" href="../../Int.html">Int</a>):<a class="type" href="../../Dynamic.html">Dynamic</a></code></p></h3><div class="doc"><p>Loads a neko primitive. By default, the name is of the form [library@method].
The primitive might not be used directly in Haxe since some of the Neko values
needs an object wrapper in Haxe.</p></div></div><div class="platform platform-neko"><a name="setCache"></a><h3><p><code><span class="keyword">function</span> <a href="#setCache"><span class="identifier">setCache</span></a>(name:<a class="type" href="../../String.html">String</a>, m:<a class="type" href="../../neko/vm/Module.html">Module</a>):<a class="type" href="../../Void.html">Void</a></code></p></h3><div class="doc"><p>Set a module in the loader cache.</p></div></div></div></div></div></body></html>